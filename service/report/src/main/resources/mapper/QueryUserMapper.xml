<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cn.fintecher.pangolin.report.mapper.QueryUserMapper">

    <select id = "queryUsers" parameterType="String" resultType="cn.fintecher.pangolin.report.model.UserModel">
            select u.id,u.real_name as name,d.id as deptId,d.code as deptCode,d.name as deptName
            from user u
            left join department d on u.dept_id = d.id
            where u.status = 504 and d.code like concat(#{deptCode}, '%')
            <if test="divisionSwitch != null">
                AND u.division_switch = #{divisionSwitch}
            </if>
    </select>

</mapper>